# Этап инициализации

Первый этап, называемый “церемонией инициализации”, отвечает за первоначальную настройку валидаторов пулов. Это делается
путем генерации и распределения ключей валидатора по разделам ключей и создания реестра валидаторов пула для
последующего использования. Это включает в себя ввод средств в пул ставок с необходимым балансом SSV для покрытия
операционных расходов.

Церемония изначально выполняется заранее, но также может быть повторена при необходимости, например, когда спрос
превышает предложение и требуются дополнительные валидаторы.

Церемония проводится в 5 этапов

![Alt text](/img/ssv/ssv_init_stage_001.png)

### 1. Генерация ключа валидатора

Чтобы операторы ssv.network могли использовать ваш валидатор (ы), вы должны предоставить им свои ключи валидатора.

Если у вас нет ключей валидатора, их можно сгенерировать с
помощью <a href="https://github.com/ethereum/staking-deposit-cli">официального инструмента командной строки</a> для
внесения депозитов Ethereum через <a href="https://prater.launchpad.ethereum.org/en/">панель запуска Ethereum</a>.

:::info

В качестве альтернативы вы можете сгенерировать ключи валидатора, используя существующие протоколы
DKG (<a href="https://github.com/ZenGo-X/awesome-tss">ссылка</a>). В настоящее
время <a href="https://docs.ssv.network/developers/integration-guides/staking-pools/initialization-stage">
разрабатывается</a> специализированная реализация
SSV (<a href="https://docs.google.com/document/d/1TRVUHjFyxINWW2H9FYLNL2pQoLy6gmvaI62KL_4cREQ/edit">SIP</a>)

:::

Инструмент выдаст набор **файлов хранилища ключей** для каждого из валидаторов и файл депозита, который объединяет
необходимые данные депозита для их активации в цепочке маяков.

* **Файл хранилища ключей** потребуется для извлечения вашего ключа валидатора на 3-м шаге - “распределение ключа
  валидатора”.

* Из **файла депозита** вы должны извлечь и сохранить следующие данные в реестре валидаторов вашего пула для каждого из
  ваших валидаторов на 4-м шаге - “настройка реестра валидаторов”.:

**Пример файла депозита**

```json
{
  "pubkey": "91e420634c5c23af7e64627a25431f19e2a6e04d928b43874d044877dd66173972d3bba37a42deb5b738cb29f0e7cd4d",
  "withdrawal_credentials": "0069787b5530667af880f987f583774d78b4eb2ac323fb9f41b05540a6566c04",
  "amount": 32000000000,
  "signature": "8993a06d7a166703a85639c1ec55e0b41bdb1bdccad4f1ad8e20140233d1593fd50e2b47092e71d242d723e164e2fd6710e12086a47bc7dd8dd8fa6eb755663c47ae6893deea99f25765178d9bb73175506d953c2ab63939ed142e8d535b38bf",
  "deposit_message_root": "02db1b65b35bf0bfbd66540d076da577cbaee85a6c638966dee353ebe346564f",
  "deposit_data_root": "1cdb5da72d7e3126eb28fa02e8a8a49bce19216053063f35f9226f2bc085100b",
  "fork_version": "00001020",
  "eth2_network_name": "prater",
  "deposit_cli_version": "1.2.0"
}
```

### 2. Выбор операторов пула

Вы можете выбрать предпочитаемого вами оператора пула из списка операторов ssv.network.

Операторы должны быть выбраны партиями по 4 для каждого из ваших валидаторов. Одна и та же группа операторов может
использоваться для всех ваших валидаторов, или вы можете использовать разные группы для увеличения диверсификации.

Для каждого выбранного оператора менеджер пула должен получить идентификатор, присвоенный его сети, и соответствующий **
ключ**.

* **Идентификаторы операторов** потребуются при хранении ваших данных валидатора в реестре валидаторов их пула для
  каждого из их валидаторов на 4-м шаге - “настройка реестра валидаторов”.

* **Ключи оператора** потребуются для распределения ваших ключей валидатора по разделам ключей на 3-м этапе -
  “распределение ключей валидатора”.

Полный реестр операторов сети и их соответствующие идентификаторы/ключи можно просмотреть с
помощью <a href="https://explorer.ssv.network/operators">обозревателя сети</a>
или <a href="https://ssv-api.stage.ssv.network/documentation">SSV API</a>.

![Alt text](/img/ssv/ssv_init_stage_002.png)

### 3. Распределение ключей Валидатора

Чтобы назначить операцию проверки выбранным операторам, ключи валидатора(ов) пула должны быть распределены по
соответствующим разделам ключей.

Для этого соберите **файлы хранилища ключей**, сгенерированные вами на 1-м шаге - “генерация ключа валидатора”, и **
ключи операторов**, полученные на 2-м шаге - “выбор операторов пула”. Затем используйте
инструменты <a href="https://wiki.chainops.org/docs/ssv.network/Dev/Tools/KeyDistributor/">распространения ключей
SSV</a>, чтобы извлечь ключ вашего валидатора и распространить его по разделам ключей.

Инструменты выведут следующий набор переменных, которые необходимо сохранить в реестре валидаторов вашего пула для
каждого из ваших валидаторов на 4-м шаге - “настройка реестра валидаторов”.:

* validatorPublicKey
* sharePublicKeys
* shareEncrypted

### 4. Настройка реестра Валидаторов

Чтобы поддерживать и добавлять валидаторы в ваш пул в соответствии с запросами пользователей, необходимо создать реестр
валидаторов. Вы должны создать реестр валидаторов вашего пула в рамках вашего контракта с пулом ставок, чтобы они могли
быть программно активированы при объединении депозитов ETH новых игроков.

Для каждого из ваших будущих валидаторов пула вы должны сохранить следующие данные:

* **Открытый ключ валидатора** - предоставляется в **хранилище ключей валидатора и файлах депозита**, сгенерированных на
  1-м шаге - “генерация ключа валидатора”, а также инструментом “Распространитель ключей SSV” на 3-м шаге -
  “распределение ключей валидатора”.
* **Подпись** - предоставляется в **файле депозита**, сгенерированном на 1-м шаге - “генерация ключа валидатора”.
* **Корень данных депозита** - указан в **файле депозита**, сгенерированном на 1-м шаге - “генерация ключа валидатора”.
* **Идентификаторы операторов** - выбираются на 2-м шаге - “выбор операторов пула”.
* **Общедоступные общие ресурсы валидатора** - предоставляются инструментом “Распространитель ключей SSV” на 3-м шаге -
  “распределение ключей валидатора” (sharePublicKeys).
* **Зашифрованные общие ресурсы валидатора** - предоставляются инструментом “Распространитель ключей SSV” на 3-м шаге -
  “распределение ключей валидатора” (shareEncrypted).

### 5. Финансирование Операционного баланса

Контракт менеджера пула должен финансироваться с достаточным балансом ETH и SSV, чтобы покрыть будущую регистрацию его
валидаторов в сети beacon (депозиты) и эксплуатационные расходы в сети ssv (
см. [Финансирование валидаторов](/docs/ssv.network/learn/stakers#validator_fund)).

При каждой активации валидатора (описанной ниже на [этапе эксплуатации](/docs/ssv.network/dev/integration/stakingpools/operation_stage)) часть этих средств будет депонирована для
покрытия его расходов.

На эксплуатационные расходы валидатора могут влиять рыночные условия, что приводит к изменению платы с течением времени.
Это означает, что стоимость должна рассчитываться на лету, чтобы гарантировать покрытие эксплуатационных расходов для
всех валидаторов.

Менеджеры пулов должны всегда отслеживать спрос на валидаторы, чтобы гарантировать, что в контракте менеджера имеется
достаточный баланс для внесения депозита, гарантируя работу будущих валидаторов.

:::info

Пожалуйста, обратите внимание, что вы всегда можете пополнить свой счет или вывести средства по своему усмотрению.

:::
