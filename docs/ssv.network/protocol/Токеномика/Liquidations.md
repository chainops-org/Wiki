# Ликвидация 

Поскольку платежи между валидаторами и операторами представляют собой игру с нулевой суммой (доходы операторов — это расходы валидаторов), 
а платежи осуществляются как непрерывный процесс, который рассчитывается задним числом, не может быть случая, когда у пользователя недостаточно средств, 
на их балансе для покрытия операционных расходов валидатора.


Чтобы снизить этот риск, сети ssv требуются дополнительные участники, называемые ликвидаторами, которые будут работать за кулисами, 
чтобы поддерживать работу системы, помечая пользователей, у которых недостаточно средств для покрытия своих расходов.


Поскольку транзакции в Ethereum не бесплатны, а пользователи не могут нести дополнительные расходы, 
если баланс их учетной записи иссякнет, для поддержания платежеспособности системы требуется модель стимулирования.

**Обеспечение ликвидации**

Сеть ssv вознаграждает ликвидаторов за расходы и риски, связанные с ликвидацией неплатежеспособных счетов. 
Это делается путем введения минимально необходимого баланса, называемого ликвидационным обеспечением, которое должно быть на каждом счете. 

Предоставленное обеспечение служит штрафом за ликвидацию для валидаторов и наградой ликвидаторам за их усилия.
Счета, которые опускаются ниже порога ликвидационного обеспечения, подвергаются риску ликвидации. 

Ликвидированные счета больше не будут управляться операторами и станут неактивными для выполнения своих обязанностей; 
это может привести к серьезным штрафам в цепочке маяков.

**Риск ликвидации**

Счета являются ликвидируемыми, если их баланса недостаточно в течение определенного периода времени, 
называемого «пороговым периодом ликвидации». 
Эта продолжительность выражена в блоках и предназначена для поддержания достаточного баланса для покрытия затрат оператора на период, 
который настроен для сети и регулируется DAO.


**Скорость сжигания**

Учитывая, что учетные записи различаются по количеству валидаторов и комиссионных, выплачиваемых операторам, оценка того, 
имеет ли учетная запись достаточный баланс для оплаты за этот период, определяется динамически для каждой учетной записи путем расчета ее 
«скорости сжигания».


* «Скорость сжигания» — это скорость, с которой учетная запись тратит SSV на блок, рассчитывается по следующей формуле:

![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%D0%BE%D0%BC%D0%B8%D0%BA%D0%B0/Burn.png)


Где:

* *expensesb* - все расходы валидатора аккаунта (платежи оператора и комиссия сети) за блок
* *revenueb* - весь заработок оператора аккаунта за блок

**Ликвидация**


Чтобы определить, является ли учетная запись ликвидируемой, пользователь должен проверить, 
имеет ли он достаточный баланс в соответствии с его скоростью сжигания, чтобы покрыть свои операционные расходы в течение периода, 
превышающего «пороговый период ликвидации».

* Ликвидация рассчитывается по:

![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%D0%BE%D0%BC%D0%B8%D0%BA%D0%B0/%D0%9B%D0%B8%D0%BA%D0%B2%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F.png)

Где:

* *balance* - баланс счета
* *burnrate* - количество токенов SSV, оплачиваемых аккаунтом за блок (см. выше)
* *period liquidation threshold period* - количество блоков


После успешной ликвидации учетная запись будет помечена как «неактивная». 
Это подаст сигнал операторам, управляющим валидаторами учетной записи, о прекращении их работы, 
а ликвидатор будет вознагражден оставшимся балансом пользователей — залогом ликвидации.


**Неплатежеспособность**

Поскольку балансы агрегируются по адресам, ликвидация происходит для каждой учетной записи, а не для конкретных валидаторов.
Состояние счета классифицируется по статусам «активный» и «неактивный» (ликвидирован).
Учетные записи, которые были ликвидированы, больше не могут использовать сеть для запуска своих валидаторов до повторной активации.



**Реактивация**

Чтобы возобновить работу валидатора, на счете должен быть достаточный баланс (новое ликвидационное обеспечение), чтобы счет был реактивирован.

* Достаточный баланс (ликвидационное обеспечение) для реактивации рассчитывается по формуле:

![Alt text](https://github.com/chainops-org/wiki/blob/master/docs/ssv.network/protocol/%D0%A2%D0%BE%D0%BA%D0%B5%D0%BD%D0%BE%D0%BC%D0%B8%D0%BA%D0%B0/reactivebalance.png)

Где: 

* *expensesb* - все расходы валидатора аккаунта (платежи оператора и комиссия сети) за блок
* *period liquidation threshold period* - количество блоков

**Пример сценария ликвидации**


* Боб зарегистрировал в сети одного валидатора, который стоит 345 токенов SSV в год с первоначальным финансированием (депозитом) в размере 395 SSV на балансе его счета.
* При пороговом периоде ликвидации в месяц (30 дней) и годовой сетевой комиссии в размере 20 SSV ликвидационное обеспечение Боба устанавливается равным 30 SSV ((345 комиссионных сборов оператора + 20 комиссионных сборов сети) / 365 * 30).
* Через год, согласно его скорости сжигания 1 SSV в день ((345 платежей оператора + 20 платежей сети) / 365), баланс аккаунта Боба упал ниже порога ликвидации.
* Алиса (наш ликвидатор) следила за сетью и пометила учетную запись Боба для ликвидации.
* Протокол подтверждает, что счет Боба неплатежеспособен, и ликвидирует его счет.
* Учетная запись Боба теперь деактивирована, а его оставшийся баланс в размере 30 SSV переведен Алисе в качестве вознаграждения за ликвидацию.
* Операторы валидатора Боба увидели, что его учетная запись была отмечена как «неактивная», и теперь прекратили работу его валидатора в цепочке маяков.
* Опустошенный и пристыженный потерей, Боб решает внести еще 60 SSV (что дает его счету возможность работать еще на месяц) на свой баланс и повторно активирует свой счет.





